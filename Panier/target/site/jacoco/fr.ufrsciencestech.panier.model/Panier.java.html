<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Panier.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Panier fini</a> &gt; <a href="index.source.html" class="el_package">fr.ufrsciencestech.panier.model</a> &gt; <span class="el_source">Panier.java</span></div><h1>Panier.java</h1><pre class="source lang-java linenums">package fr.ufrsciencestech.panier.model;

import java.util.ArrayList;
import java.util.Observable;

public class Panier extends Observable{
    private ArrayList&lt;Fruit&gt; fruits;  //attribut pour stocker les fruits
    private int contenanceMax;        //nb maximum d'oranges que peut contenir le panier

<span class="fc" id="L10">    public Panier(int contenanceMax) {  //initialise un panier vide ayant une certaine contenance maximale (precisee en parametre)</span>
<span class="fc" id="L11">        this.fruits = new ArrayList&lt;Fruit&gt;();</span>
<span class="pc bpc" id="L12" title="1 of 2 branches missed.">        if (contenanceMax &lt; 1) {</span>
<span class="nc" id="L13">            throw new IllegalArgumentException(&quot;La contenance maximale doit être supérieure à 0&quot;);</span>
        } else {
<span class="fc" id="L15">            this.contenanceMax = contenanceMax;</span>
        }
<span class="fc" id="L17">    }</span>

    @Override
    public String toString() {  //affichage de ce qui est contenu dans le panier : liste des fruits presents
<span class="nc" id="L21">        String result = &quot;&quot;;</span>
<span class="nc bnc" id="L22" title="All 2 branches missed.">        for (Fruit f : fruits) {</span>
<span class="nc" id="L23">            result += f.toString() + &quot;\n&quot;;</span>
        }
<span class="nc" id="L25">        return result;</span>
    }

    public ArrayList&lt;Fruit&gt; getFruits() {  //accesseur du premier attribut
<span class="nc" id="L29">        return this.fruits;</span>
    }

    public void setFruits(ArrayList&lt;Fruit&gt; fruits) { //modificateur du premier attribut
<span class="nc" id="L33">        this.fruits = fruits;</span>
<span class="nc" id="L34">    }</span>

    public int getTaillePanier() {  //accesseur retournant la taille allouee pour l'attibut fruits
<span class="fc" id="L37">        return this.fruits.size();</span>
    }

    public int getContenanceMax() {  //accesseur du second attribut
<span class="nc" id="L41">        return this.contenanceMax;</span>
    }

    public Fruit getFruit(int i) {  //accesseur retournant le fruit contenu dans le panier a l'emplacement n°i ou null s'il n'y a rien a cet emplacement
<span class="nc" id="L45">        return this.fruits.get(i);</span>
    }

    public void setFruit(int i, Fruit f) {  //modificateur du fruit contenu dans le panier a l'emplacement n°i par f (s'il y a bien deja un fruit a cet emplacement, ne rien faire sinon)
<span class="nc bnc" id="L49" title="All 2 branches missed.">        if (this.fruits.contains(this.fruits.get(i))) {</span>
<span class="nc" id="L50">            this.fruits.set(i, f);</span>
        }
<span class="nc" id="L52">    }</span>

    public boolean estVide() {  //predicat indiquant que le panier est vide
<span class="fc" id="L55">        return this.fruits.isEmpty();</span>
    }

    public boolean estPlein() {  //predicat indiquant que le panier est plein
<span class="pc bpc" id="L59" title="1 of 2 branches missed.">        return this.fruits.size() == this.contenanceMax;</span>
    }

    public void ajout(Fruit o) throws PanierPleinException {  //ajoute le fruit o a la fin du panier si celui-ci n'est pas plein
<span class="pc bpc" id="L63" title="1 of 2 branches missed.">        if(!estPlein()) {</span>
<span class="fc" id="L64">            this.fruits.add(o);</span>
<span class="fc" id="L65">            setChanged(); //marks this Observable object as having been changed; the hasChanged method will now return true</span>
<span class="fc" id="L66">            notifyObservers(getTaillePanier()); //if this object has changed, as indicated by the hasChanged method, then notify all of its observers and then call the clearChanged method to indicate that this object has no longer changed</span>
<span class="fc" id="L67">        }</span>
<span class="nc" id="L68">        else throw new PanierPleinException();</span>
<span class="fc" id="L69">    }</span>

    public void retrait() throws PanierVideException { //retire le dernier fruit du panier si celui-ci n'est pas vide
<span class="pc bpc" id="L72" title="1 of 2 branches missed.">        if(!estVide()) {</span>
<span class="nc" id="L73">            this.fruits.remove(getTaillePanier() - 1);</span>
<span class="nc" id="L74">            setChanged(); //marks this Observable object as having been changed; the hasChanged method will now return true</span>
<span class="nc" id="L75">            notifyObservers(getTaillePanier()); //if this object has changed, as indicated by the hasChanged method, then notify all of its observers and then call the clearChanged method to indicate that this object has no longer changed</span>
<span class="nc" id="L76">        }</span>
<span class="fc" id="L77">        else throw new PanierVideException();</span>
<span class="nc" id="L78">    }</span>

    public double getPrix(){  //calcule le prix du panier par addition des prix de tous les fruits contenus dedans
<span class="nc" id="L81">	double prix = 0.0;</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">        for (int i=0; i&lt;fruits.size(); i++) {</span>
<span class="nc" id="L83">            prix += fruits.get(i).getPrix();</span>
        }
<span class="nc" id="L85">        return prix;</span>
    }

    //à faire
    public void boycotteOrigine(String origine) {  //supprime du panier tous les fruits provenant du pays origine

<span class="nc" id="L91">    }</span>

    @Override
    public boolean equals(Object o) {  ///predicat pour tester si 2 paniers sont equivalents : s'ils contiennent exactement les memes fruits
<span class="nc bnc" id="L95" title="All 4 branches missed.">        if (o != null &amp;&amp; getClass() == o.getClass()) {</span>
<span class="nc" id="L96">            Panier p = (Panier) o;</span>
<span class="nc" id="L97">            int compt = 0;</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">            if (p.fruits.size() == this.fruits.size()) {</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">                for (Fruit f : p.fruits) {</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">                    if (this.fruits.contains(f)) {</span>
<span class="nc" id="L101">                        System.out.println(f);</span>
<span class="nc" id="L102">                        compt++;</span>
                    }
                }
<span class="nc bnc" id="L105" title="All 2 branches missed.">                return compt == p.fruits.size();</span>
            }
        }
<span class="nc" id="L108">        return false;</span>
    }

    //tests
    public static void main(String[] args) throws PanierPleinException {
        //Ecrire ici vos tests
        
<span class="nc" id="L115">        System.out.println(&quot;premier test Panier&quot;);</span>
<span class="nc" id="L116">        Panier p1 = new Panier(5);</span>
<span class="nc" id="L117">        Panier p2 = new Panier(5);</span>
<span class="nc" id="L118">        Panier p3 = new Panier(1);</span>

<span class="nc" id="L120">        Orange o1 = new Orange(0.5, &quot;Espagne&quot;);</span>
<span class="nc" id="L121">        Orange o2 = new Orange(1.0, &quot;Espagne&quot;);</span>
<span class="nc" id="L122">        Orange o3 = new Orange(0.8, &quot;France&quot;);</span>
<span class="nc" id="L123">        Orange o4 = new Orange(0.2, &quot;Italy&quot;);</span>
<span class="nc" id="L124">        Orange o5 = new Orange(0.1, &quot;France&quot;);</span>

<span class="nc" id="L126">        p1.ajout(o1);</span>
<span class="nc" id="L127">        p1.ajout(o2);</span>
<span class="nc" id="L128">        p1.ajout(o3);</span>
<span class="nc" id="L129">        p1.ajout(o4);</span>
<span class="nc" id="L130">        p1.ajout(o5);</span>

<span class="nc" id="L132">        p2.ajout(o5);</span>
<span class="nc" id="L133">        p2.ajout(o3);</span>
<span class="nc" id="L134">        p2.ajout(o2);</span>
<span class="nc" id="L135">        p2.ajout(o1);</span>
<span class="nc" id="L136">        p2.ajout(o4);</span>

<span class="nc" id="L138">        p3.ajout(o5);</span>

<span class="nc" id="L140">        System.out.println(p1.equals(p3));</span>

<span class="nc" id="L142">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>